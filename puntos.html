<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Puntos - VirtualGift</title>

    <!-- ‚úÖ Estilos externos -->
    <link rel="stylesheet" href="css/inicio.css">
    <link rel="stylesheet" href="css/puntos.css">

    <!-- ‚úÖ Android App Mode -->
    <script defer src="js/app-mode.js"></script>

    <!-- Firebase -->
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script defer src="js/firebase-config.js"></script>

    <!-- ‚úÖ Utilidad para mantener app=android en URLs -->
    <script>
        function withAppFlag(url) {
            const isAndroidApp =
                document.documentElement.classList.contains("android-app") ||
                document.body.classList.contains("android-app");

            if (!isAndroidApp) return url;
            if (url.includes("app=android")) return url;

            const parts = url.split('#');
            const base = parts[0];
            const hash = parts[1] ? ('#' + parts[1]) : '';

            const fixed = base.includes("?") ? (base + "&app=android") : (base + "?app=android");
            return fixed + hash;
        }
    </script>
</head>

<body>
    <!-- ============================================ -->
    <!-- HEADER -->
    <!-- ============================================ -->
    <header class="header">
        <div class="logo">
            <img src="images/logo-virtual-login.png" alt="Virtual Studios Logo" class="logo-image">
            <span class="logo-text">VIRTUAL<span class="logo-studios">GIFT</span></span>
        </div>

        <div class="header-icons">
            <!-- Icono de usuario/perfil -->
            <div class="icon-users" onclick="window.location.href=withAppFlag('home.html')" style="cursor: pointer;">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
            </div>

            <!-- Icono de puntos/moneda -->
            <div class="icon-coin" onclick="window.location.href=withAppFlag('puntos.html')" style="cursor: pointer;">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="48" fill="#FDB813"/>
                    <defs>
                        <radialGradient id="coinGradient">
                            <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#FFA500;stop-opacity:1" />
                        </radialGradient>
                    </defs>
                    <circle cx="50" cy="50" r="42" fill="url(#coinGradient)"/>
                    <path d="M 30 30 L 42 65 L 50 65 L 58 65 L 70 30 L 62 30 L 54 57 L 50 57 L 46 57 L 38 30 Z" fill="#FFFACD"/>
                </svg>
            </div>

            <!-- Icono de notificaciones -->
            <div class="icon-notification" onclick="window.location.href=withAppFlag('notificaciones.html')" style="cursor: pointer;">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                </svg>
                <span class="notification-badge" id="notificationBadge" style="display:none;">0</span>
            </div>
        </div>
    </header>

    <!-- ============================================ -->
    <!-- CONTENEDOR DE PUNTOS -->
    <!-- ============================================ -->
    <div class="points-container">

        <!-- Bot√≥n para volver -->
        <button class="back-button" onclick="window.location.href=withAppFlag('inicio.html')">
            ‚Üê Volver al inicio
        </button>

        <!-- ============================================ -->
        <!-- HEADER DE PUNTOS -->
        <!-- ============================================ -->
        <div class="points-header">
            <div class="points-icon">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="48" fill="#FDB813"/>
                    <defs>
                        <radialGradient id="coinGradient2">
                            <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#FFA500;stop-opacity:1" />
                        </radialGradient>
                    </defs>
                    <circle cx="50" cy="50" r="42" fill="url(#coinGradient2)"/>
                    <path d="M 30 30 L 42 65 L 50 65 L 58 65 L 70 30 L 62 30 L 54 57 L 50 57 L 46 57 L 38 30 Z" fill="#FFFACD"/>
                </svg>
            </div>
            <div class="points-label">Tus VirtualCoins</div>
            <div class="points-balance" id="totalPoints">0</div>
        </div>

        <!-- ============================================ -->
        <!-- GRID DE TARJETAS DE PUNTOS -->
        <!-- ============================================ -->
        <div class="points-grid">
            <div class="points-card">
                <div class="card-icon">üéÆ</div>
                <div class="card-title">Jugar Juegos</div>
                <div class="card-description">
                    Gana hasta 50 puntos por cada juego que completes en la secci√≥n de juegos populares.
                </div>
                <button class="card-action" onclick="window.location.href=withAppFlag('inicio.html#games')">
                    Jugar Ahora
                </button>
            </div>

            <div class="points-card">
                <div class="card-icon">üéØ</div>
                <div class="card-title">Participar en Sorteos</div>
                <div class="card-description">
                    Participa en sorteos y gana puntos extra. ¬°Revisa nuestros sorteos activos!
                </div>
                <button class="card-action" onclick="window.location.href=withAppFlag('inicio.html#sorteos')">
                    Ver Sorteos
                </button>
            </div>

            <div class="points-card">
                <div class="card-icon">üì∞</div>
                <div class="card-title">Leer Noticias</div>
                <div class="card-description">
                    Lee noticias de gaming y gana 10 puntos por cada art√≠culo que leas completo.
                </div>
                <button class="card-action" onclick="window.location.href=withAppFlag('inicio.html#news')">
                    Ver Noticias
                </button>
            </div>

            <div class="points-card">
                <div class="card-icon">üéÅ</div>
                <div class="card-title">Recompensa Diaria</div>
                <div class="card-description">
                    Inicia sesi√≥n diariamente y recibe 25 puntos gratis cada d√≠a.
                </div>
                <button class="card-action" id="dailyRewardBtn">Reclamar Hoy</button>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- HISTORIAL DE PUNTOS -->
        <!-- ============================================ -->
        <div class="history-section">
            <div class="history-title">üìä Historial de Puntos</div>
            <div id="historyContainer">
                <div class="empty-state">
                    <div class="empty-icon">üí∞</div>
                    <div>A√∫n no tienes movimientos de puntos</div>
                    <div style="margin-top: 10px; font-size: 0.9em;">
                        ¬°Empieza a ganar puntos completando actividades!
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚úÖ Scripts externos -->
    <script defer src="js/puntos.js"></script>
</body>
</html>
