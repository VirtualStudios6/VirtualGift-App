<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#06011c">
  <link rel="icon" href="images/logo-virtual-login.png">
  <title>VirtualGift - Login</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,400;0,14..32,500;0,14..32,600;0,14..32,700;0,14..32,800;0,14..32,900&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="css/styles.css">

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <script defer src="js/firebase-config.js"></script>
  <script defer src="js/error-handler.js"></script>
  <script defer src="js/validators.js"></script>
</head>

<body>

  <!-- Fondo animado -->
  <div class="bg-orbs" aria-hidden="true">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>
  <div class="bg-grid" aria-hidden="true"></div>

  <div class="auth-container">
    <div class="auth-card">

      <!-- LOGO -->
      <div class="logo">
        <div class="logo-glow" aria-hidden="true"></div>
        <img src="images/logo-virtual-login.png" alt="VirtualGift">
        <div class="logo-wordmark">
          VIRTUAL<span>GIFT</span>
        </div>
      </div>

      <!-- TABS -->
      <div class="auth-tabs" id="authTabs">
        <button class="auth-tab active" id="tabLogin" onclick="switchTab('login')">Iniciar Sesi√≥n</button>
        <button class="auth-tab" id="tabRegister" onclick="switchTab('register')">Registro</button>
        <div class="tab-indicator" id="tabIndicator"></div>
      </div>

      <!-- LOGIN -->
      <form id="login-form" class="form active" novalidate>
        <div class="field-group">
          <label for="login-email">Correo electr√≥nico</label>
          <div class="input-wrap">
            <svg class="input-icon" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
            <input type="email" id="login-email" placeholder="tu@correo.com" autocomplete="email">
          </div>
        </div>

        <div class="field-group">
          <label for="login-password">Contrase√±a</label>
          <div class="input-wrap">
            <svg class="input-icon" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
            <button type="button" class="toggle-pw" onclick="togglePw('login-password', this)" tabindex="-1">
              <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </button>
          </div>
        </div>

        <a href="#" id="forgot-password" class="forgot">¬øOlvidaste tu contrase√±a?</a>

        <button type="button" id="login-btn" class="btn-primary">
          <span>Iniciar Sesi√≥n</span>
          <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        </button>
      </form>

      <!-- REGISTRO -->
      <form id="register-form" class="form" novalidate>
        <div class="field-group">
          <label for="username">Nombre de usuario</label>
          <div class="input-wrap">
            <svg class="input-icon" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <input type="text" id="username" placeholder="MiNombreGamer">
          </div>
        </div>

        <div class="field-group">
          <label for="email">Correo electr√≥nico</label>
          <div class="input-wrap">
            <svg class="input-icon" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
            <input type="email" id="email" placeholder="tucorreo@ejemplo.com" autocomplete="email">
          </div>
        </div>

        <div class="field-group">
          <label for="password">Contrase√±a</label>
          <div class="input-wrap">
            <svg class="input-icon" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password">
            <button type="button" class="toggle-pw" onclick="togglePw('password', this)" tabindex="-1">
              <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </button>
          </div>
          <div class="pw-strength-wrap">
            <div class="pw-strength-bar"><div id="password-strength-bar"></div></div>
            <span class="pw-strength-label" id="pwStrengthLabel"></span>
          </div>
        </div>

        <div class="field-group">
          <label for="confirm-password">Confirmar contrase√±a</label>
          <div class="input-wrap">
            <svg class="input-icon" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            <input type="password" id="confirm-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password">
          </div>
        </div>

        <div class="terms-row">
          <label class="toggle-switch">
            <input type="checkbox" id="terms">
            <span class="toggle-slider"></span>
          </label>
          <span>Acepto los <a href="#" class="link">T√©rminos y Condiciones</a></span>
        </div>

        <button type="button" id="register-btn" class="btn-primary">
          <span>Crear Cuenta</span>
          <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
        </button>
      </form>

      <!-- DIVIDER -->
      <div class="divider"><span>o contin√∫a con</span></div>

      <!-- SOCIAL -->
      <div class="social-btns">
        <button type="button" id="google-login" class="btn-social">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Google
        </button>
        <button type="button" id="facebook-login" class="btn-social">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="#1877F2" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
          Facebook
        </button>
      </div>

      <footer>
        <p>¬© 2026 VIRTUALGIFT ¬∑ Todos los derechos reservados</p>
        <div class="footer-links">
          <a href="legal/terminos.html">T√©rminos</a>
          <a href="legal/Politicas.html">Privacidad</a>
          <a href="legal/pautas.html">Pautas</a>
        </div>
      </footer>

    </div>
  </div>

  <!-- RECOVERY MODAL -->
  <div id="recovery-overlay" class="recovery-overlay"></div>
  <div id="recovery-container" class="recovery-container">
    <div class="recovery-icon">üîë</div>
    <h3>Recuperar contrase√±a</h3>
    <p>Te enviaremos un enlace a tu correo para restablecer tu contrase√±a.</p>
    <div class="input-wrap" style="margin:16px 0;">
      <svg class="input-icon" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
      <input type="email" id="recovery-email" placeholder="Tu correo">
    </div>
    <div class="recovery-buttons">
      <button type="button" id="send-recovery-email" class="btn-primary" style="margin:0;">
        <span>Enviar enlace</span>
      </button>
      <button type="button" id="cancel-recovery" class="btn-ghost">Cancelar</button>
    </div>
  </div>

  <!-- NOTIFICATION -->
  <div id="notification" class="notification"></div>

  <script>
    // ===== TABS =====
    function switchTab(tab) {
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');
      const tabLogin = document.getElementById('tabLogin');
      const tabRegister = document.getElementById('tabRegister');
      const indicator = document.getElementById('tabIndicator');

      if (tab === 'login') {
        loginForm.classList.add('active');
        registerForm.classList.remove('active');
        tabLogin.classList.add('active');
        tabRegister.classList.remove('active');
        indicator.style.transform = 'translateX(0)';
      } else {
        registerForm.classList.add('active');
        loginForm.classList.remove('active');
        tabRegister.classList.add('active');
        tabLogin.classList.remove('active');
        indicator.style.transform = 'translateX(100%)';
      }
    }

    // Links antiguos por si auth.js los usa
    const showRegisterEl = document.getElementById('show-register');
    const showLoginEl    = document.getElementById('show-login');
    if (showRegisterEl) showRegisterEl.addEventListener('click', e => { e.preventDefault(); switchTab('register'); });
    if (showLoginEl)    showLoginEl.addEventListener('click',    e => { e.preventDefault(); switchTab('login'); });

    // ===== TOGGLE PASSWORD =====
    function togglePw(inputId, btn) {
      const input = document.getElementById(inputId);
      const isText = input.type === 'text';
      input.type = isText ? 'password' : 'text';
      btn.style.opacity = isText ? '0.5' : '1';
    }

    // ===== PASSWORD STRENGTH =====
    const pwInput = document.getElementById('password');
    if (pwInput) {
      pwInput.addEventListener('input', () => {
        const val = pwInput.value;
        const bar = document.getElementById('password-strength-bar');
        const lbl = document.getElementById('pwStrengthLabel');
        if (!bar || !lbl) return;
        let score = 0;
        if (val.length >= 8) score++;
        if (/[A-Z]/.test(val)) score++;
        if (/[0-9]/.test(val)) score++;
        if (/[^A-Za-z0-9]/.test(val)) score++;
        const pct   = ['0%','25%','50%','75%','100%'][score];
        const color = ['','#ef4444','#f97316','#eab308','#22c55e'][score];
        const text  = ['','D√©bil','Regular','Buena','Fuerte'][score];
        bar.style.width = pct;
        bar.style.background = color;
        lbl.textContent = text;
        lbl.style.color = color;
      });
    }
  </script>

  <script defer src="js/auth.js"></script>
</body>
</html>
