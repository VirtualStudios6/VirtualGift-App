<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#06011c">

  <link rel="icon" type="image/png" sizes="32x32" href="images/logo-virtual-login.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/logo-virtual-login.png">
  <link rel="apple-touch-icon" href="images/logo-virtual-login.png">

  <title>Bienvenido Â· VirtualGift</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,400;0,14..32,500;0,14..32,600;0,14..32,700;0,14..32,800;0,14..32,900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/welcome.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- Firebase -->
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script defer src="js/firebase-config.js"></script>

  <!-- withAppFlag disponible antes de cualquier onclick -->
  <script>
    function withAppFlag(url) {
      const isAndroidApp =
        document.documentElement.classList.contains("android-app") ||
        document.body.classList.contains("android-app");
      if (!isAndroidApp) return url;
      if (url.includes("app=android")) return url;
      const parts = url.split("#");
      const base  = parts[0];
      const hash  = parts[1] ? "#" + parts[1] : "";
      const fixed = base.includes("?") ? base + "&app=android" : base + "?app=android";
      return fixed + hash;
    }
  </script>

  <script defer src="js/app-mode.js"></script>
</head>
<body>
  <div class="welcome-container">
    <div class="welcome-card">

      <div class="logo">
        <img src="images/logo-virtual-login.png" alt="VirtualGift Logo">
      </div>

      <h1 class="welcome-title">Â¡Bienvenido de vuelta!</h1>

      <div class="user-info">
        <h2 id="userName">Usuario</h2>
        <div class="points-display">
          <i class="fas fa-coins"></i>
          <span id="userPoints">0</span>
          <span class="points-label">Puntos</span>
        </div>
      </div>

      <p class="welcome-message" id="welcome-message">
        Nos alegra verte de nuevo. Â¡PrepÃ¡rate para ganar recompensas increÃ­bles!
      </p>

      <button id="continue-btn" class="continue-btn">
        Continuar <i class="fas fa-arrow-right"></i>
      </button>

    </div>
  </div>

  <!-- Modal para email no verificado (reemplaza alert nativo) -->
  <div id="vg-email-modal" style="
    display:none; position:fixed; inset:0; z-index:9999;
    background:rgba(2,5,21,.85); backdrop-filter:blur(6px);
    align-items:center; justify-content:center; padding:20px;
  ">
    <div style="
      background:rgba(28,31,47,.98); border:1px solid rgba(41,50,68,.75);
      border-radius:22px; padding:24px 20px 20px; max-width:320px; width:100%;
      box-shadow:0 20px 60px rgba(0,0,0,.55); text-align:center;
      display:flex; flex-direction:column; gap:16px;
      animation:wModalIn .18s ease;
    ">
      <div style="font-size:2.5em;">ðŸ“§</div>
      <p style="font-size:.97em; font-weight:700; color:#dcefff; line-height:1.55; margin:0;">
        Por favor, verifica tu email para acceder a VirtualGift.
      </p>
      <button id="vg-email-modal-ok" style="
        background:linear-gradient(90deg,#8d17fb,#70189b); color:#fff;
        border:none; padding:13px 20px; border-radius:14px;
        font-weight:800; cursor:pointer; font-size:.95em;
      ">Entendido</button>
    </div>
  </div>

  <style>
    @keyframes wModalIn {
      from { opacity:0; transform:scale(.96) translateY(8px); }
      to   { opacity:1; transform:scale(1) translateY(0); }
    }
  </style>

  <script defer src="js/welcome.js"></script>
</body>
</html>
